<!DOCTYPE html>
<html class="has-navbar-fixed-top">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width,initial-scale=1">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <title>Foliage</title>
        <link rel="stylesheet" href="public/css/bulma.min.css">
        <link rel="stylesheet" href="public/css/custom.css">
        <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.3.1/css/all.css" integrity="sha384-mzrmE5qonljUremFsqc01SB46JvROS7bZs3IO2EmfFsd15uHvIt+Y8vEf7N7fWAU" crossorigin="anonymous">
    </head>
    <body>

        <!-- Navbar -->
        <nav class="navbar is-light is-fixed-top">
            <div class="container">

            <div class="navbar-brand">


                <div class="select">
                    <select id="vegetationTypeList" onchange="getVegetationType();">
                        <option value="empty">Foliage type </option>
                        <option value="alfalfa">Alfalfa</option>
                        <option value="barley">Barley</option>
                        <option value="cover crop">Cover crop</option>
                        <option value="grassland">Grassland</option>
                        <option value="soybean">Soybean</option>
                        <option value="sorghum">Sorghum</option>
                        <option value="pasture">Pasture</option>
                        <option value="other">Other</option>
                        <option value="potatoes">Potatoes</option>
                        <option value="rice">Rice</option>
                        <option value="strawberry">Strawberry</option>
                        <option value="turf">Turf</option>
                        <option value="spring wheat">Spring wheat</option>
                        <option value="winter wheat">Winter wheat</option>
                    </select>
                </div>
                <label class="button is-dark is-outlined is-light" id="btnUploadLabel" style="margin:5px;">
                    <i class="fa fa-camera-retro fa-2x" aria-hidden="true"></i>
                        <span class="is-hidden-mobile" style="padding-left: 10px;"><strong>Load images</strong></span>
                </label>
                <span class="navbar-burger burger" data-target="navMenu">
                <span></span>
                <span></span>
                <span></span>
                </span>

            </div>

            <div id="navMenu" class="navbar-menu">
                <div class="navbar-end">
                    <div class="navbar-start">
                        <a class="navbar-item" id="openAboutModalBtn">
                            <span class="icon"><i class="fas fa-info"></i></span><span>About</span>
                        </a>
                        <a class="navbar-item" href="https://dl.sciencesocieties.org/publications/aj/abstracts/107/6/2312" target="_blank">
                            <span class="icon"><i class="fas fa-book"></i></span><span>Reference</span>
                        </a>   
                        <a class="navbar-item forum" href="forum.html" target="_blank">
                            <span class="icon"><i class="fas fa-users"></i></span><span>Forum</span>
                        </a>
                        <a class="navbar-item" href="https://github.com/andres-patrignani/foliage">
                            <span class="icon"><i class="fab fa-github"></i></span><span>Github</span>
                        </a>
                    </div>
                </div>
            </div>

            <div class="navbar-end">
               


            </div>


            </div>
        </nav>

        <!-- Progrss bar -->
        <progress class="progress is-small is-primary is-radiusless" id="progressBar" value="" max="100"></progress>

        <section class="hero is-fullheight" id="heroBanner">
            <!-- Hero content: will be in the middle -->
            <div class="hero-body">
                <div class="container has-text-centered">
                    <figure>
                        <img src="public/img/logo.png" class="align-center" style="width: calc(350px + 5vw); height: auto;"/>
                    </figure>
                    <h2 class="subtitle">
                        <i>A minimalist tool for batch image processing of green canopy cover.</i>
                    </h2>
                    <br/>
                </div>
            </div>

            <div class="hero-foot">
                <p style="margin-left:10px">Version 1.0</p>
            </div>
        </section>

        <!-- Results table -->
        <div class="container " id="containerTable">
            <table class="table is-bordered" id="resultsTable">
                <tr>
                    <th>#</th>
                    <th>Original</th>
                    <th>Classified</th>
                    <th class="is-hidden-mobile">Vegetation</th> 
                    <th class="is-hidden-mobile">Filename</th> 
                    <th>Canopy cover (%)</th>
                    <th class="is-hidden-mobile">Latitude</th>
                    <th class="is-hidden-mobile">Longitude</th>
                    <th class="is-hidden-mobile">Altitude</th>
                </tr>
            </table>
    
            <div class="container">
                <button type="button" id="btnDownloadCSV" class="button is-link">
                    <i class="fas fa-file-download" aria-hidden="true"></i>&nbsp;  <span class="is-hidden-mobile">Download</span>&nbsp; CSV
                </button>
                <button type="button" id="btnDownloadZIP" class="button is-successfull">
                    <i class="fas fa-file-archive" aria-hidden="true"></i>&nbsp;  <span class="is-hidden-mobile">Download</span>&nbsp; ZIP
                    </button>
                <button type="button" id="btnDeleteTable" class="button is-danger is-outlined is-pulled-right">
                    <i class="fas fa-trash-alt" aria-hidden="true"></i>&nbsp;  <span class="is-hidden-mobile">Delete table</span>
                </button>
            </div>

        </div>

        <!-- Modal -->
        <div class="modal" id="aboutModal">
            <div class="modal-background"></div>
            <div class="modal-card">
                <header class="modal-card-head">
                <p class="modal-card-title">About</p>
                <button class="delete" id="closeAboutModal" aria-label="close"></button>
                </header>
                <section class="modal-card-body">

                    <p>
                        Foliage is a light-weight web-application for analyzing green canopy cover. Foliage is a spin-off from the Canopeo application. It uses the same
                        algorithm to classify green canopy cover, but Foliage serves a different purpose and audience.
                        Foliage gives end users the possibility to analyze batches of digital images without the need for downloading and installing software or signing a new account.
                        This means that anyone can start analyzing images right away and that end users always have access to the latest version of Foliage web-app.
                    </p>
                    <p>Foliage was developed and is maintained by Andres Patrignani. If you want to get involved or you simply want to share comments and feedback, 
                        please send me an e-mail at: andrespatrignani@ksu.edu
                    </p>

                    <br/>

                    <h3 class="subtitle">Privacy and image metadata</h3>
                    <p>
                    Foliage retrieves metadata already present in the uploaded images. This includes basic attributes such as 
                    image name, image dimensions, image file size, and pixel colors. These attributes are used to populate the table and classify 
                    the green canopy cover. More advanced attributes such as geographic coordinates are only accessed if they are available in the image metadata. 
                    For instance, if you load a picture that you took a month ago while having the GPS disabled, then Foliage will not have access to that 
                    information and will populate the table field with "Unknown". If the uploaded images contain geo-referenced data, 
                    then Foliage will try to extract that data to populate the table.
                    Foliage does not collect any private information (e.g. image metadata). If one day we decided to do so, we will first ask you for your permission.
                    </p>

                    <br/>

                    <h3 class="subtitle">License</h3>
                    <p>Foliage is an open-source project under the MIT license and runs entirely in your web browser. All images and metadata
                        remain in your local device at all times.
                    </p>

                    <br/>

                    <h3 class="subtitle">Citation example</h3>
                    <p>
                        Patrignani, A. and Ochsner, T.E., 2015. 
                        Canopeo: A powerful new tool for measuring fractional green canopy cover. 
                        Agronomy Journal, 107(6), pp.2312-2320.
                    </p>

                    <br/>

                    <p>
                        Find out more about how other people are using similar tools at
                        <a href="https://scholar.google.com/scholar?cites=16734011246830097977&as_sdt=2005&sciodt=0,5&hl=en" target="_blank">
                           this link
                        </a>
                    </p>
                </section>

                <!--
                <footer class="modal-card-foot">
                    <button class="button is-success">Save changes</button>
                    <button class="button">Cancel</button>
                </footer>
                -->
            </div>
        </div>

        <script src="public/js/FileSaver.js"></script>
        <script src="public/js/jszip.min.js"></script>
        <script src="public/js/exif.js"></script>
        <script src="public/js/foliage_v1.0.js"></script>
        <script src="public/libraries/p5/p5.min.js"></script>
        <script src="public/libraries/p5/addons/p5.dom.min.js"></script>
        <script>
                ((window.gitter = {}).chat = {}).options = {
                  room: 'foliageapp/community',
                  activationElement: '.forum',
                };
        </script>
        <script src="https://sidecar.gitter.im/dist/sidecar.v1.js" async defer></script>

        <script>
        (function() {
            var burger = document.querySelector('.burger');
            var nav = document.querySelector('#'+burger.dataset.target);
           
            burger.addEventListener('click', function(){
              burger.classList.toggle('is-active');
              nav.classList.toggle('is-active');
            });
          })();
        </script>
    </body>
</html>